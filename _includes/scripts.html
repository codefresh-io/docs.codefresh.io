<script>
  const SITE_BASE_URL = "{{ site.baseurl }}";
  const SITE_GITOPS_COLLECTION = "{{ site.gitops_collection }}";
  const SITE_IS_GITOPS_COLLECTION = "{{ page.collection }}" === "{{ site.gitops_collection }}";
</script>
<script src="{{ site.baseurl }}/assets/js/argohub-redirect/argohub-redirect.min.js"></script>


<script src="{{ site.cdn.jquery }}" integrity="{{ site.cdn.jquery_hash }}" crossorigin="anonymous"></script>
<script>window.jQuery || document.write('<script src="{{ site.baseurl }}/assets/js/vendor/jquery.min.js"><\/script>')</script>

<script src="{{ site.baseurl }}/assets/js/vendor/popper.min.js"{% if site.github %} integrity="{{ site.cdn.popper_hash }}" crossorigin="anonymous"{% endif %}></script>

{%- if site.github -%}
  <script src="{{ site.cdn.js }}" integrity="{{ site.cdn.js_hash }}" crossorigin="anonymous"></script>
{%- else -%}
  <script src="{{ site.baseurl }}/dist/js/bootstrap.js"></script>
{%- endif -%}

{%- if page.layout == "docs" -%} {%- endif -%}
<script src="https://cdn.jsdelivr.net/npm/typesense-docsearch.js@3.0.1"></script>
<!-- <script src="https://cdn.jsdelivr.net/npm/typesense-docsearch.js@latest/dist/cdn/docsearch.min.js"></script> -->
<!-- <script src="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.js"></script> -->

<script src="https://cdnjs.cloudflare.com/ajax/libs/ekko-lightbox/5.3.0/ekko-lightbox.min.js"></script>

{%- if site.github -%}
  <script src="{{ site.baseurl }}/assets/js/docs.min.js"></script>
{%- else -%}
  <script src="{{ site.baseurl }}/assets/js/vendor/anchor.min.js"></script>
  <script src="{{ site.baseurl }}/assets/js/vendor/clipboard.min.js"></script>
  <script src="{{ site.baseurl }}/assets/js/vendor/holder.min.js"></script>
  <script src="{{ site.baseurl }}/assets/js/vendor/jquery.smooth-scroll.min.js"></script>

  <script src="{{ site.baseurl }}/assets/js/vendor/jquery.cookie.min.js"></script>
  <script src="{{ site.baseurl }}/assets/js/vendor/jquery.navgoco.js"></script>

  <script src="{{ site.baseurl }}/assets/js/src/application.js"></script>
  <script src="{{ site.baseurl }}/assets/js/src/ie-emulation-modes-warning.js"></script>
  <script src="{{ site.baseurl }}/assets/js/src/redirect-popup.js"></script>
{%- endif -%}


<!-- Start of Doc Search Embed Code -->
<!--<script>-->
<!--  docsearch({-->
<!--    // inputSelector: '.doc-search-input',-->
<!--    container: '#searchbar',-->
<!--    typesenseCollectionName: 'project-one-doc-index', // Should match the collection name you mention in the docsearch scraper config.js-->
<!--    typesenseServerConfig: {-->
<!--      nodes: [{-->
<!--        host: 'fxokw93dqyu27pv6p.a1.typesense.net', // For Typesense Cloud use xxx.a1.typesense.net-->
<!--        port: '443',      // For Typesense Cloud use 443-->
<!--        protocol: 'https'   // For Typesense Cloud use https-->
<!--      }],-->
<!--      apiKey: '5aRIuEbEpw9LTf2B5te4Essx4o4HE4Fl', // Use API Key with only Search permissions-->
<!--    },-->
<!--  });-->
<!--</script>-->
<!-- End of Doc Search Embed Code -->

<script>
  const apiKey = '42885a887590b9e28cce52518224850b';

  const amplitudeScript = document.createElement('script');
  amplitudeScript.src = `https://cdn.amplitude.com/script/${apiKey}.engagement.js`;

  amplitudeScript.onload = async function() {
    if (typeof window.engagement !== 'undefined') {
      window.engagement.init(apiKey);

      const userId = 'docs-site-user';
      await window.engagement.boot({
        user: {
          user_id: userId,
        },
      });

      document.addEventListener("keydown", function (event) {
        const isMac = navigator.userAgent.includes('Mac');
        if ((event.key === "k") && ((isMac && event.metaKey) || (!isMac && event.ctrlKey))) {
          event.preventDefault();
          window.engagement.rc.open();
        }
      });
    } else {
      console.warn('Amplitude engagement is not available.');
    }
  };

  amplitudeScript.onerror = function() {
    console.error('Failed to load Amplitude engagement script');
  };

  document.head.appendChild(amplitudeScript);
</script>
