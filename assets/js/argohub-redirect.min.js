/* eslint-disable no-implicit-globals, strict */
/* global SITE_BASE_URL, SITE_GITOPS_COLLECTION, SITE_IS_GITOPS_COLLECTION */
let GITOPS_DOC_COOKIE="cfdoctype=gitops",IS_GITOPS_DOC_COOKIE_SET=document.cookie.includes(GITOPS_DOC_COOKIE);async function getArgoHubRedirectURL(e){e=e.replace(SITE_BASE_URL,"");var t=(await fetchRedirectMap())[e];return t?t===`/${SITE_GITOPS_COLLECTION}/`?""+location.href+SITE_GITOPS_COLLECTION:location.href.replace(e,t):null}async function handleRedirect(){var e;!SITE_IS_GITOPS_COLLECTION&&IS_GITOPS_DOC_COOKIE_SET&&(e=await getArgoHubRedirectURL(location.pathname))&&(location.href=e)}async function fetchRedirectMap(){var e=await fetch(SITE_BASE_URL+"/assets/js/argohub-redirect-mapping.json");if(e.ok)return e.json();throw new Error("Failed to fetch the collections redirect map.")}function setGitOpsDocumentationCookie(){configureGitOpsDocumentationCookie(2592e3)}function removeGitOpsDocumentationCookie(){configureGitOpsDocumentationCookie(0)}function configureGitOpsDocumentationCookie(e){let t=GITOPS_DOC_COOKIE+`; Max-Age=${e}; Path=/; SameSite=Strict`;"https:"===location.protocol&&(t+="; Secure"),"codefresh.io"===location.hostname&&(t+="; Domain=.codefresh.io"),document.cookie=t}function toggleSegmentDropdown(){document.querySelector(".custom-select").classList.toggle("open")}
// eslint-disable-next-line no-unused-vars
function handleDropdownKeydown(e){var t=document.querySelector(".custom-select"),o=t.querySelectorAll(".option"),n=t.classList.contains("open");switch(e.key){case"Enter":case" ":e.preventDefault(),toggleSegmentDropdown();break;case"ArrowDown":e.preventDefault(),n||toggleSegmentDropdown(),o[0].focus();break;case"Escape":n&&toggleSegmentDropdown()}}async function selectSegmentOption(e,t){document.querySelector(".select-display").textContent=e.textContent;let o=await fetchRedirectMap(),n=window.location.pathname.replace(SITE_BASE_URL,"");"enterprise"===t?(removeGitOpsDocumentationCookie(),e=Object.keys(o).find(e=>o[e]===n),window.location.href=e?""+SITE_BASE_URL+e:SITE_BASE_URL+"/"):"gitops"===t&&(setGitOpsDocumentationCookie(),e=o[n],window.location.href=e?""+SITE_BASE_URL+e:`${SITE_BASE_URL}/${SITE_GITOPS_COLLECTION}/`)}
// eslint-disable-next-line no-unused-vars
function handleOptionKeydown(e,t,o){var n=document.querySelector(".custom-select"),c=n.querySelectorAll(".option"),r=Array.from(c).indexOf(t);switch(e.key){case"Enter":case" ":e.preventDefault(),selectSegmentOption(t,o);break;case"ArrowDown":e.preventDefault(),r<c.length-1&&c[r+1].focus();break;case"ArrowUp":e.preventDefault(),0<r&&c[r-1].focus();break;case"Escape":n.classList.remove("open"),n.querySelector(".select-display").focus()}}handleRedirect(),document.addEventListener("click",e=>{var t=document.querySelector(".custom-select");t.contains(e.target)||t.classList.remove("open")});